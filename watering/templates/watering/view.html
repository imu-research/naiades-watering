{% extends "base.html" %}

{% load i18n %}
{% load static %}

{% block css %}
    <link href="{% static 'css/home.css' %}" rel="stylesheet">
    <link href="{% static 'css/view.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
     <div class="row" style="margin: 10px;">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link{% if request.path == "/watering/list/" %} active{% endif %}" id="home-tab" href="/watering/list" role="tab" aria-controls="home"
              aria-selected="true">Liste</a>
          </li>
          <li class="nav-item">
            <a class="nav-link{% if request.path == "/watering/map/" %} active{% endif %}" id="profile-tab" href="/watering/map" role="tab" aria-controls="profile"
              aria-selected="false">Carte</a>
          </li>
        </ul>
     </div>
    <div class="row" id="data" style="margin: 10px;">
    <div class="row" style="margin: 10px;">
         <div class="col-md-6">
{#                    <div class="btn-group">#}
{#                      <button type="button" class="btn btn-primary">Today</button>#}
{#                      <button type="button" class="btn btn-primary">Tomorrow</button>#}
{#                      <button type="button" class="btn btn-primary"><i class="glyphicon glyphicon-align-right"></i></button>#}
{#                    </div>#}
             <form class="form-inline">
                 <div class="form-group">
                     <label for="next-watering">Suggested watering day </label>
                     <select id="next-watering" class="form-control">
                         {% if mode != "route" %}
                             <option value="">All</option>
                         {% endif %}

                         <option value="TODAY">Today</option>
                         <option value="TOMORROW">Tomorrow</option>

                         {% if mode != "route" %}
                             <option value="FUTURE">Later in the future</option>
                             <option value="UNKNOWN">Unknown</option>
                         {% endif %}
                     </select>
                 </div>
             </form>
         </div>
         <div class="col-md-3">
         </div>

         {% if mode != "route" %}
             <div class="col-md-3">
                <button type="button" class="btn btn-primary btn-block" onclick="location.href='{% url 'box-create' %}'"><span style="margin: 2px;" class="glyphicon glyphicon-plus"></span> Configure a new Box</button>
             </div>
         {% endif %}
     </div>

    {% if mode != "route" %}
        <div class="row" style="margin: 10px;">
             <div class="col-md-4">
             </div>
              <div class="col-md-2">
              </div>
              <div class="col-md-2">
             </div>
               <div class="col-md-4">
                    <button type="button" class="btn btn-primary btn-block" onclick="location.href='{% url 'route' %}'">View suggested route for visiting boxes</button>
               </div>
        </div>
    {% elif TESTING %}
        <div class="row" style="margin: 10px">
            <button type="button" class="btn btn-primary" id="test-route-btn">
                Start test route
            </button>
            <button type="button" class="btn btn-default disabled" disabled id="next-position-btn">
                Move to next position
            </button>
        </div>
    {% endif %}

    <div class="row" style="margin: 10px;">
        <div class="col-xs-12">
             <div id="container" style="min-height: 500px;"></div>
        </div>
    </div>
    </div>
{% endblock %}

{% block js %}
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeXisjnsAMK0rYoxNNOPPdtc9JFF7OL_w&libraries=places&v=3.2&sensor=false"></script>
    <script>
        window.RENDERING_MODE = "{{ mode }}";
    </script>
    <script src="{% static 'js/render.js' %}"></script>
    {% if mode == "route" %}
        <script src="{% static 'js/show-route.js' %}"></script>
        <script src="{% static 'js/location-manager.js' %}"></script>
        <script src="{% static 'js/geofencing.js' %}"></script>
        <script>
            $(function() {
                $('#test-route-btn').on("click", function() {
                    // start location manager
                    LocationManager.setModeAndRestart("dev");

                    // enable next position button
                    $('#next-position-btn')
                        .removeClass('disabled')
                        .removeAttr('disabled');
                });

                $('#next-position-btn').on('click', function() {
                    LocationManager.moveToNextDevLocation();
                });
            });
        </script>
    {% endif %}
    <script src="{% static 'js/load-data.js' %}"></script>
{% endblock %}