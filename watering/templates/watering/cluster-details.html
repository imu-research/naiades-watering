{% extends "watering/location-base.html" %}

{% load i18n %}
{% load static %}

{% block css %}
    <link href="{% static 'css/create.css' %}" rel="stylesheet">
    <style>
        #start-watering-info {
            margin: 10px 0;
        }

        #start-watering-info i {
            margin-left: 10px;
        }

        #cluster-details-container .watering-value {
            color: #777;
            font-weight: 700;
            margin-bottom: 10px;
        }

        body {
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }

        #cluster-details-gauge-container {
            width: 100%;
            height: 500px;
        }

        .panel-heading {
            font-size: 20px;
            font-weight: 700;
            text-align: center;
        }

        .recommended-value {
            font-size: 52px;
            font-weight: 700;
            color: #777;
            width: 100%;
            margin: 30px auto;
            text-align: center;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="row" style="margin-bottom: 10px;">
        <div class="col-xs-12 col-sm-9">
            <h3 style="margin-top:0%; margin-left: 14px;">{% trans "Cluster " %}{{ box.data.name}} </h3>
        </div>
        <div class="col-xs-12 col-sm-3" style="text-align: right">
            <a href="/watering" id="back-box"
                    class="btn btn-primary" style="margin-right: 12px;">
                {% trans "Next Cluster" %}: 1
            </a>
        </div>
    </div>

    <div class="row" style="margin: 10px 0;">
        <div class="col-xs-12 col-md-6">

             <div class="btn-group">
                <a href="#" class="btn btn-sm btn-danger" title="Dry plants"><i class="glyphicon glyphicon-warning-sign"></i>
                    <span style="margin-left: 5px;">{% trans "Dry plants" %}</span></a>
                <a href="#" class="btn btn-sm btn-success" title="No watering required"><i class="glyphicon glyphicon-ok"></i>
                    <span style="margin-left: 5px;">{% trans "No watering required" %}</span></a>
            </div>

        </div>
        <div class="col-xs-12 col-md-6" style="text-align: right; padding: 0">

           <div class="btn-group">
                <a href="/watering/box/{{ box.id }}/issues/" class="btn btn-sm btn-default" title="List problems"><i class="glyphicon glyphicon-list"></i>
                    <span style="margin-left: 5px;">{% trans "Issues" %}</span></a>
                <a href="/watering/box/{{ box.id }}/issues/report/" class="btn btn-sm btn-default" title="Report new problem"><i class="glyphicon glyphicon-plus"></i>
                    <span style="margin-left: 5px;">{% trans "Report new issue" %}</span></a>
            </div>


        </div>
    </div>
{#    <div class="row" style="margin: 10px 0;">#}
{#       <div class="col-md-12">#}
{#           <h5>Predicted Required  Water Amount (Avg. per Box) :</h5>#}
{#           <div class="progress progress-striped active">#}
{#                <div class="progress">#}
{#                    <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%;">3lt / 20 lt</div>#}
{#                </div>#}
{#           </div>#}
{#       </div>#}
{#    </div>#}
    <div class="row">
        <div class="col-xs-6">
            <div class="panel panel-default">
                <div class="panel-heading">{% trans "Predicted Required  Water Amount (Cluster)" %}</div>
                <div class="panel-body">
                    <div class="recommended-value">
                        {{ recommended_consumption }} lt
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xs-6">
            <div class="panel panel-default">
                <div class="panel-heading">{% trans "Predicted Required  Water Amount (Avg. per Box)" %}</div>
                <div class="panel-body">
                    <div class="recommended-value">
                        {{ recommended_consumption_per_box }} lt
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <div class="panel panel-default">
                <div class="panel-heading">{% trans "Water used (cluster)" %}</div>
                <div class="panel-body">
                    <div id="cluster-details-gauge-container"></div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script>
        window.RECOMMENDED_CONSUMPTION = {{ recommended_consumption }};
        window.NUMBER_OF_BOXES = {{ number_of_boxes }};
    </script>
    <script src="{% static 'js/cluster-gauge.js' %}?v=20210327.1"></script>
    <script src="{% static 'js/cluster-details.js' %}?v=20210327.1"></script>
    <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
    <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
{% endblock %}